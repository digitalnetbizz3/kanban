<html>
    <script>
        const createEvent = (name, value, additionalParam) => JSON.stringify({name, value, ...additionalParam});
        const getFlutterHandler = () => window.callbackHandler;
        const getAndroidHandler = () => window.Android;
        
        function getHandler() {
            let handler = getFlutterHandler();
            if (!handler) {
                handler = getAndroidHandler();
            }
            return handler;
        }
        
        function closeWindow() {
            getHandler().postMessage(createEvent('onClose',''));
        }
        function setTitle(str) {
            let event = createEvent('webAction','soFiSetTitle', {'pageTitle':'Set From Web'});
            getHandler().postMessage(event);
        }
    </script>
    <body>
        Testing Event from Web Page within App
        <br/>
        <button onclick="closeWindow()">Close WebView</button>
        <br/>
        <button onclick="setTitle('hello')">Set Title to Foo Bar</button>
        
    </body>
</html>
